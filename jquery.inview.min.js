(function($){var inviewObjects={},viewportSize,viewportOffset,d=document,w=window,documentElement=d.documentElement,expando=$.expando;$.event.special.inview={add:function(data){inviewObjects[data.guid+"-"+this[expando]]={data:data,$element:$(this)}},remove:function(data){try{delete inviewObjects[data.guid+"-"+this[expando]]}catch(e){}}};function getViewportSize(){var mode,domObject,size={height:w.innerHeight,width:w.innerWidth};if(!size.height){mode=d.compatMode;if(mode||!$.support.boxModel){domObject=mode==='CSS1Compat'?documentElement:d.body;size={height:domObject.clientHeight,width:domObject.clientWidth}}}return size}function getViewportOffset(){return{top:w.pageYOffset||documentElement.scrollTop||d.body.scrollTop,left:w.pageXOffset||documentElement.scrollLeft||d.body.scrollLeft}}function checkInView(){var $elements=$(),elementsLength,i=0;$.each(inviewObjects,function(i,inviewObject){var selector=inviewObject.data.selector,$element=inviewObject.$element;$elements=$elements.add(selector?$element.find(selector):$element)});elementsLength=$elements.length;if(elementsLength){viewportSize=viewportSize||getViewportSize();viewportOffset=viewportOffset||getViewportOffset();for(;i<elementsLength;i++){if(!$.contains(documentElement,$elements[i])){continue}var $element=$($elements[i]),elementSize={height:$element.height(),width:$element.width()},elementOffset=$element.offset(),inView=$element.data('inview'),visiblePartX,visiblePartY,visiblePartsMerged;if(!viewportOffset||!viewportSize){return}if((parseInt(elementOffset.top)+parseInt(elementSize.height))>parseInt(viewportOffset.top)&&parseInt(elementOffset.top)<(parseInt(viewportOffset.top)+parseInt(viewportSize.height))&&(parseInt(elementOffset.left)+parseInt(elementSize.width))>parseInt(viewportOffset.left)&&parseInt(elementOffset.left)<(parseInt(viewportOffset.left)+parseInt(viewportSize.width))){visiblePartX=(parseInt(viewportOffset.left)>parseInt(elementOffset.left)?'right':(parseInt(viewportOffset.left)+parseInt(viewportSize.width))<(parseInt(elementOffset.left)+parseInt(elementSize.width))?'left':'both');visiblePartY=(parseInt(viewportOffset.top)>parseInt(elementOffset.top)?'bottom':(parseInt(viewportOffset.top)+parseInt(viewportSize.height))<(parseInt(elementOffset.top)+parseInt(elementSize.height))?'top':'both');visiblePartsMerged=visiblePartX+"-"+visiblePartY;if(!inView||inView!==visiblePartsMerged){$element.data('inview',visiblePartsMerged).trigger('inview',[true,visiblePartX,visiblePartY])}}else if(inView){$element.data('inview',false).trigger('inview',[false])}}}}$(w).bind("scroll resize",function(){viewportSize=viewportOffset=null});setInterval(checkInView,250)})(jQuery);